<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <meta name="description" content="Use Viewer to start building new applications or easily embed Cesium into existing applications.">
    <meta name="cesium-sandcastle-labels" content="Beginner, Showcases">
    <title>Cesium Demo</title>
    <script type="text/javascript" src="../Sandcastle-header.js"></script>
    <script src="../CesiumUnminified/Cesium.js"></script>
    <script>window.CESIUM_BASE_URL = "../CesiumUnminified/";</script>
  </head>
  <body
    class="sandcastle-loading"
    data-sandcastle-bucket="bucket-requirejs.html"
  >
<style>
  @import url(../templates/bucket.css);
</style>
<div id="cesiumContainer" class="fullSize"></div>
<div id="loadingOverlay">
  <h1>Loading...</h1>
</div>
<div id="toolbar"></div>
<script id="cesium_sandcastle_script">
window.startup = async function (Cesium) {
    'use strict';
//Sandcastle_Begin
Cesium.Ion.defaultAccessToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhMTUwOGUwOS1lYTc3LTQ0MWEtYmU1MS02NmEyZGZkNzIyMzUiLCJpZCI6MzQ1NzMsImlhdCI6MTYwMDUwMDY1NX0.NEx-UMwAvC_1k7e3psWIseWa03JxfT6if9B6J7OUfww";

const viewer = new Cesium.Viewer("cesiumContainer");

async function loadAndExtrude() {
  try {
    const resource = await Cesium.IonResource.fromAssetId(3512636);
    const dataSource = await Cesium.GeoJsonDataSource.load(resource, {
      clampToGround: false, // Binalar yere oturacak, yükseklik gösterecek
    });
    await viewer.dataSources.add(dataSource);
    await viewer.zoomTo(dataSource);

    const entities = dataSource.entities.values;
    for (let i = 0; i < entities.length; i++) {
      const entity = entities[i];

      // Polygon olup olmadığını kontrol et
      if (entity.polygon) {
        // properties.height var mı kontrol et, yoksa sabit yükseklik ata
        const height = entity.properties.height
          ? entity.properties.height.getValue()
          : 30; // Burada sabit 30 metre verdik

        entity.polygon.extrudedHeight = height;
        entity.polygon.height = 0; // Taban kotu, genelde 0
        entity.polygon.material = Cesium.Color.LIGHTGRAY.withAlpha(0.7);
        entity.polygon.outline = true;
        entity.polygon.outlineColor = Cesium.Color.BLACK;
      }
    }
  } catch (error) {
    console.error(error);
  }
}

loadAndExtrude();
//Sandcastle_End
    Sandcastle.finishedLoading();
};
if (typeof Cesium !== 'undefined') {
    window.startupCalled = true;
    window.startup(Cesium).catch((error) => {
      "use strict";
      console.error(error);
    });
}
</script>
</body>
</html>
